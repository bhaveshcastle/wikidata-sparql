<nav-bar></nav-bar>
<p></p>

<div>
  <uib-tabset active="activeJustified" justified="true">
    <uib-tab index="0" heading="Add Image dataset/label" ng-click="vm.fetch_datasets()">
      <div class="col-sm-8 col-sm-offset-2">
        <br>
        <div class="col-sm-5">
          <input type="text" class="form-control" placeholder="Enter Url of Image" ng-model="vm.newImageUrl">
        </div>
        <div class="col-sm-2">
          <select class="form-control" data-ng-options="o.dataset_name for o in vm.dataset_list" data-ng-model="vm.newImageDataset" ng-change="vm.get_labels_for_dataset(vm.newImageDataset)"></select>
        </div>

        <div class="col-sm-2">
          <md-input-container style="margin-top:-1px;">
            <md-select class="form-control" multiple ng-model="vm.selectedLabels" placeholder="Select Lables">
              <md-option ng-repeat="x in vm.label_list_for_dataset" value="{{x.id}}">{{x.label}}</md-option>
            </md-select>
          </md-input-container>
        </div>

        <div class="col-sm-2" style="margin-left:10px;">
          <button type="button" class="btn btn-success" ng-click="vm.label_image(vm.newImageUrl, vm.newImageDataset, vm.selectedLabels)">Add</button>
        </div>
      </div>
    </uib-tab>
    <uib-tab index="1" heading="View Image dataset/label" ng-click="vm.fetch_datasets()">
      <div class="col-sm-8 col-sm-offset-2">
        <br>
        <div class="col-sm-4">
          <select style="width:100%;" class="form-control" data-ng-options="o.dataset_name for o in vm.dataset_list" data-ng-model="vm.viewImageDataset" ng-change="vm.get_labels_for_dataset(vm.viewImageDataset)"></select>
        </div>

        <div class="col-sm-4">
          <md-input-container style="margin-top:-1px;width:100%;">
            <md-select class="form-control" multiple ng-model="vm.selectedLabelsView" placeholder="Select Lables">
              <md-option ng-repeat="x in vm.label_list_for_dataset_view" value="{{x.id}}">{{x.label}}</md-option>
            </md-select>
          </md-input-container>
        </div>

        <div class="col-sm-2" style="margin-left:10px;">
          <button type="button" class="btn btn-success" ng-click="vm.find_images(vm.viewImageDataset, vm.selectedLabelsView)">Search</button>
        </div>
      </div>
      <table class="table table-striped table-condensed table-hover">
        <thead>
            <tr>
                <th class="reference_id" ng-click="sort_by(order, vm.viewImageDataset, vm.selectedLabelsView)" custom-sort order="'reference_id'" sort="sort">#</th>
                <th class="ban_start">Image</th>
                <th class="user_id">Label</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-click="redirectUrl(item.user_id)" ng-repeat="item in fetchedImages | orderBy:sort.sortingOrder:sort.reverse">
                <td>{{item.created_at_epoch}}</td>
                <td>{{item.image_url}}</td>
                <td>{{item.label_id}}</td>
            </tr>
        </tbody>
        <tfoot>
            <td colspan="9">
                <div style="text-align: center">
                    <div class="pagination">
                        <ul>
                            <li ng-class="{disabled: currentPage == 0}">
                                <a href ng-click="prevPage(vm.viewImageDataset, vm.selectedLabelsView)">« Prev</a>
                            </li>

                            <li ng-class="{active}">
                                <a href ng-bind="currentPage + 1">1</a>
                            </li>

                            <li ng-class="{disabled: next_end == true}">
                                <a href ng-click="nextPage(vm.viewImageDataset, vm.selectedLabelsView)">Next »</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </td>
        </tfoot>
      </table>
    </uib-tab>
    <uib-tab index="2" heading="Datasets">
      <div class="col-sm-8 col-sm-offset-2">
        <br>
        <div class="col-sm-6">
          <input type="text" class="form-control" placeholder="Enter Dataset Name" ng-model="vm.newDatasetName">
        </div>
        <div class="col-sm-2">
          <button type="button" class="btn btn-success" ng-click="vm.add_dataset(vm.newDatasetName)">Add Dataset</button>
        </div>
      </div>
      <h4 ng-if="vm.dataset_list.length == 0" style="text-align: center !important;">
        No data available
      </h4>
      <table ng-if="vm.dataset_list.length > 0" class="table table-striped table-condensed table-hover">
        <thead>
          <tr>
            <th class="spam_url">Id</th>
            <th class="count">Name</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="item in vm.dataset_list">
            <td>{{item.id}}</td>
            <td>{{item.dataset_name}}</td>
          </tr>
        </tbody>
      </table>
    </uib-tab>
    <uib-tab index="3" heading="Labels" ng-click="vm.fetch_labels()">
      <div class="col-sm-10 col-sm-offset-2">
        <br>
        <div class="col-sm-2">
            <select class="form-control" data-ng-options="o.dataset_name for o in vm.dataset_list" data-ng-model="vm.newLabelDataset"></select>
        </div>
        <div class="col-sm-6">
          <input type="text" class="form-control" placeholder="Enter Label Name" ng-model="vm.newLabelName">
        </div>
        <div class="col-sm-2">
          <button type="button" class="btn btn-success" ng-click="vm.add_label(vm.newLabelName, vm.newLabelDataset)">Add Label</button>
        </div>
      </div>
      <br>
      <div ng-if="vm.label_list.length == 0">
        <h4 style="text-align: center !important;">
          No data available
        </h4>
      </div>
      <table ng-if="vm.label_list.length > 0" class="table table-striped table-condensed table-hover">
        <thead>
          <tr>
            <th class="spam_url">Id</th>
            <th class="count">Name</th>
            <th class="count">Dataset Name</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="item in vm.label_list">
            <td>{{item.id}}</td>
            <td>{{item.label}}</td>
            <td>{{item.dataset_name}}</td>
          </tr>
        </tbody>
      </table>
    </uib-tab>
  </uib-tabset>
</div>